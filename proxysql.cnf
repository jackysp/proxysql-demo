datadir="/var/lib/proxysql"

# Admin interface configuration
admin_variables=
{
    admin_credentials="admin:admin"
    mysql_ifaces="0.0.0.0:6032"
}

# MySQL proxy configuration
mysql_variables=
{
    threads=4
    max_connections=2048
    interfaces="0.0.0.0:6033"
    default_schema="information_schema"
}

# MySQL servers - Primary and Shadow
mysql_servers=
(
    # Primary MySQL Server
    {
        address="host.docker.internal"
        port=3306
        hostgroup=0
        status="ONLINE"
        weight=1000
    },
    # Shadow MySQL Server
    {
        address="host.docker.internal"
        port=3307
        hostgroup=1
        status="ONLINE"
        weight=1000
    }
)

# Users
mysql_users=
(
    {
        username="root"
        password=""
        default_hostgroup=0
        active=1
    }
)

# Query rules - Mirror ALL queries to shadow server
mysql_query_rules=
(
    {
        rule_id=1
        active=1
        match_pattern=".*"
        destination_hostgroup=0
        mirror_hostgroup=1
        apply=1
    }
)